<main class="container-fluid py-4 drink-form-container fade-in">

  <!-- üîπ T√≠tulo -->
  <h2 class="text-center fw-bold text-white bg-naranja py-2 rounded mb-4">
    {{ estoyEnEditar() ? 'Editar Bebida' : 'Agregar Bebida' }}
  </h2>

  <!-- üîπ Formulario din√°mico -->
  <form
    [formGroup]="estoyEnEditar() ? editBebidaForm : newBebidaForm"
    (ngSubmit)="estoyEnEditar() ? onSubmitEditar() : onSubmitAgregar()"
    class="mx-auto card shadow-lg bg-dark text-white p-4"
  >
    <div class="row g-3">

      <!-- Nombre -->
      <div class="col-12">
        <label for="name" class="form-label">Nombre de la bebida</label>
        <input
          type="text"
          id="name"
          class="form-control"
          formControlName="name"
          placeholder="Ingrese nombre de la bebida"
        />
        @if(isEdit) {
          <small class="text-danger" *ngIf="name?.invalid && name?.touched">El nombre es requerido.</small>
        }
        @else {
          <small class="text-danger" *ngIf="newName?.invalid && newName?.touched">El nombre es requerido.</small>
        }
        
      </div>

      <!-- Tipo -->
      <div class="col-md-6">
        <label for="type" class="form-label">Tipo de bebida</label>
        <select id="type" class="form-select" formControlName="type">
          <option value="Con alcohol">Con alcohol</option>
          <option value="Sin alcohol">Sin alcohol</option>
          <option value="Ninguna">Ninguna</option>
        </select>
      </div>

      <!-- Categor√≠a -->
      <div class="col-md-6">
        <label for="category" class="form-label">Categor√≠a</label>
        <select id="category" class="form-select" formControlName="category">
          <option *ngFor="let c of [
            'Agua','Agua con gas','Agua saborizada','Gaseosa','Energizante','Jugo','Cerveza','Vino',
            'Licor','Whisky','Ron','Vodka','T√©quila','Champagne','Cachaca','Granadina','Gin',
            'Aperitivo','Otro','Ninguna'
          ]" [value]="c">{{ c }}</option>
        </select>
      </div>

      <!-- Marca -->
      <div class="col-md-6">
        <label for="brand" class="form-label">Marca</label>
        <input
          type="text"
          id="brand"
          class="form-control"
          formControlName="brand"
          placeholder="Ingrese marca"
        />
        @if(isEdit) {
          <small class="text-danger" *ngIf="brand?.invalid && brand?.touched">La marca es requerida.</small>
        }
        @else {
          <small class="text-danger" *ngIf="newBrand?.invalid && newBrand?.touched">La marca es requerida.</small>
        }
      </div>

      <!-- Mililitros -->
      <div class="col-md-6">
        <label for="milliliters" class="form-label">Mililitros</label>
        <input
          type="number"
          id="milliliters"
          class="form-control"
          formControlName="milliliters"
          placeholder="Ingrese cantidad en ml"
        />
        @if(isEdit) {
            <small class="text-danger" *ngIf="milliliters?.invalid && milliliters?.touched">
              Los mililitros son requeridos y debe ser mayor a 0.
            </small>
        }
        @else {
            <small class="text-danger" *ngIf="newMilliliters?.invalid && newMilliliters?.touched">
              Los mililitros son requeridos y debe ser mayor a 0.
            </small>
        }
      </div>

      <!-- Contenido alcohol -->
      <div class="col-md-6">
        <label for="alcoholContent" class="form-label">Contenido de alcohol (%)</label>
        <input
          type="number"
          id="alcoholContent"
          class="form-control"
          formControlName="alcoholContent"
          placeholder="Opcional"
        />
         @if(isEdit) {
          <small class="text-danger" *ngIf="alcoholContent?.invalid && alcoholContent?.touched">
            El contenido de alcohol es requerido y debe ser mayor o igual a 0.
          </small>
        }
        @else {
          <small class="text-danger" *ngIf="newAlcoholContent?.invalid && newAlcoholContent?.touched">
            El contenido de alcohol es requerido y debe ser mayor o igual a 0.
          </small>
        }
      </div>

      <!-- Precio -->
      <div class="col-md-6">
        <label for="price" class="form-label">Precio</label>
        <input
          type="number"
          id="price"
          class="form-control"
          formControlName="price"
          placeholder="Ingrese precio"
        />

        @if(isEdit) {
        <small class="text-danger" *ngIf="price?.invalid && price?.touched">
          El precio es requerido y debe ser mayor a 0.
        </small>
        }
        @else {
        <small class="text-danger" *ngIf="newPrice?.invalid && newPrice?.touched">
          El precio es requerido y debe ser mayor a 0.
        </small>
        }
      </div>

      <!-- Stock -->
      <div class="col-md-6">
        <label for="stock" class="form-label">Stock</label>
        <input
          type="number"
          id="stock"
          class="form-control"
          formControlName="stock"
          placeholder="Ingrese cantidad disponible"
        />
        @if(isEdit) {
        <small class="text-danger" *ngIf="stock?.invalid && stock?.touched">
          El stock es requerido y debe ser mayor o igual a 0.
        </small>
        }
        @else {
        <small class="text-danger" *ngIf="newStock?.invalid && newStock?.touched">
          El stock es requerido y debe ser mayor o igual a 0.
        </small>
        }
      </div>

      <!-- Imagen -->
      <div class="col-md-6">
        <label for="imageUrl" class="form-label">Imagen (URL)</label>
        <input
          type="url"
          id="imageUrl"
          class="form-control"
          formControlName="imageUrl"
          placeholder="Ingrese URL de la imagen"
        />

        @if(isEdit) {
        <small class="text-danger" *ngIf="imageUrl?.invalid && imageUrl?.touched">
          La imagen es requerida.
        </small>
        }
        @else {
        <small class="text-danger" *ngIf="newImageUrl?.invalid && newImageUrl?.touched">
          La imagen es requerida.
        </small>
        }
      </div>

      <!-- Botones -->
      <div class="col-12 d-flex justify-content-between mt-4 flex-wrap gap-3">
        <button
          type="submit"
          class="btn btn-warning fw-semibold px-4 text-white"
          [disabled]="
            (estoyEnEditar() ? editBebidaForm.invalid : newBebidaForm.invalid)
          "
        >
          {{ estoyEnEditar() ? 'Guardar Cambios' : 'Agregar Bebida' }}
        </button>

        <button type="button" class="btn btn-secondary fw-semibold px-4" (click)="back()">
          <i class="fa-solid fa-arrow-left me-2"></i> Volver Atr√°s
        </button>
      </div>
    </div>
  </form>
</main>
